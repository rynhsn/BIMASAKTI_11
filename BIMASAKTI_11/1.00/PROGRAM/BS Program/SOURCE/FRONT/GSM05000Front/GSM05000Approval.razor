@inherits R_Page

<R_StackLayout Row="true" Spacing="1">
    <R_ItemLayout>
        <R_Label>Transaction Code</R_Label>
    </R_ItemLayout>
    <R_ItemLayout xs="1">
        <R_TextBox Value="@_GSM05000ApprovalUserViewModel.HeaderEntity.CTRANSACTION_CODE"
                   Enabled="false" />
    </R_ItemLayout>
    <R_ItemLayout xs="2">
        <R_TextBox Value="@_GSM05000ApprovalUserViewModel.HeaderEntity.CTRANSACTION_NAME"
                   Enabled="false" />
    </R_ItemLayout>
    <R_ItemLayout>
        <R_CheckBox Value="@_GSM05000ApprovalUserViewModel.HeaderEntity.LDEPT_MODE"
                    Enabled="false" />
        <R_Label>By Department</R_Label>
    </R_ItemLayout>

    <R_ItemLayout>
        <R_Label>Approval Mode</R_Label>
    </R_ItemLayout>

    <R_ItemLayout xs="1">
        <R_TextBox Value="@_GSM05000ApprovalUserViewModel.HeaderEntity.CAPPROVAL_MODE_DESCR"
                   Enabled="false" />
    </R_ItemLayout>
</R_StackLayout>
<R_StackLayout Row="true" Class="mt-3">
    <R_ItemLayout xs="3">
        <R_Grid @ref="@_gridRefDept"
                DataSource="@_GSM05000ApprovalUserViewModel.DepartmentList"
                Pageable="true"
                R_ConductorGridSource="@_conductorRefDept"
                R_GridType="@R_eGridType.Original"
                R_ServiceGetListRecord="@GetListDept"
                AllowDeleteRow="false"
                AllowEditRow="false"
                AllowAddNewRow="false">
            <R_GridColumns>
                <R_GridTextColumn FieldName="CDEPT" HeaderText="Department" />
            </R_GridColumns>
        </R_Grid>

        <R_ConductorGrid @ref="@_conductorRefDept"
                         R_ViewModel="@_GSM05000ApprovalUserViewModel"
                         R_IsHeader="true"
                         R_Display="@DisplayDept"
                         R_ServiceSave="@SaveApprover"/>
    </R_ItemLayout>
    <R_ItemLayout xs="8">
        <R_StackLayout Row="true" Spacing="1" Class="mb-2">
            <R_ItemLayout xs="2">
                <R_Label>Department</R_Label>
            </R_ItemLayout>
            <R_ItemLayout xs="2">
                <R_TextBox Value="@_GSM05000ApprovalUserViewModel.DepartmentEntity.CDEPT_CODE"
                           Enabled="false" />
            </R_ItemLayout>
            <R_ItemLayout xs="4">
                <R_TextBox Value="@_GSM05000ApprovalUserViewModel.DepartmentEntity.CDEPT_NAME"
                           Enabled="false" />
            </R_ItemLayout>
        </R_StackLayout>
        <R_GroupBox ShowBorder="true" Class="p-2 mb-2">
            <R_StackLayout>
                <R_ItemLayout>
                    <R_Grid @ref="@_gridRefApprover"
                            DataSource="@_GSM05000ApprovalUserViewModel.ApproverList"
                            Pageable="true"
                            R_ConductorGridSource="@_conductorRefApprover"
                            R_GridType="@R_eGridType.Original"
                            R_ServiceGetListRecord="@GetListApprover"
                            AllowDeleteRow="true"
                            AllowEditRow="true"
                            AllowAddNewRow="true"
                            R_Before_Open_Grid_Lookup="BeforeLookupApprover"
                            R_After_Open_Grid_Lookup="AfterLookupApprover"
                            Width="635px">
                        <R_GridColumns>
                            <R_GridTextColumn FieldName="CSEQUENCE" HeaderText="Sequence" />
                            <R_GridLookupColumn FieldName="CUSER_ID" HeaderText="User Id" R_EnableAdd />
                            <R_GridTextColumn FieldName="CUSER_NAME" HeaderText="User Name" />
                            <R_GridTextColumn FieldName="CPOSITION" HeaderText="Position" />
                            <R_GridCheckBoxColumn FieldName="LREPLACEMENT" HeaderText="Replacement" R_EnableAdd R_EnableEdit />
                            <R_GridNumericColumn FieldName="NLIMIT_AMOUNT" HeaderText="Min Limit Amount" Min="0" Step="1" R_EnableAdd R_EnableEdit />
                            <R_GridTextColumn FieldName="CUPDATE_BY" HeaderText="Last Updated By" />
                            <R_GridDateTimePickerColumn FieldName="DUPDATE_DATE" HeaderText="Last Updated Date" />
                            <R_GridTextColumn FieldName="CCREATE_BY" HeaderText="Created By" />
                            <R_GridDateTimePickerColumn FieldName="DCREATE_DATE" HeaderText="Created Date" />
                        </R_GridColumns>
                    </R_Grid>
                </R_ItemLayout>
                <R_ItemLayout>
                    <R_Label Class="fw-bold">*Min Limit Amount in Local Currency</R_Label>
                </R_ItemLayout>
            </R_StackLayout>
            <R_StackLayout Row>
                <R_ItemLayout xs="2">
                    <R_Popup>Copy To</R_Popup>
                </R_ItemLayout>
                <R_ItemLayout xs="2">
                    <R_Popup>Copy From</R_Popup>
                </R_ItemLayout>
                <R_ItemLayout xs="3">
                    <R_Popup>Change User Sequence</R_Popup>
                </R_ItemLayout>
            </R_StackLayout>
        </R_GroupBox>
        <R_GroupBox ShowBorder="true" Class="p-2">
            <R_Grid @ref="@_gridRefReplacement"
                    DataSource="@_GSM05000ApprovalReplacementViewModel.ReplacementList"
                    Pageable="true"
                    R_ConductorGridSource="@_conductorRefReplacement"
                    R_GridType="@R_eGridType.Original"
                    R_ServiceGetListRecord="@GetListReplacement"
                    AllowDeleteRow="true"
                    AllowEditRow="false"
                    AllowAddNewRow="true"
                    R_Before_Open_Grid_Lookup="BeforeLookupReplacement"
                    R_After_Open_Grid_Lookup="AfterLookupReplacement"
                    Width="635px">
                <R_GridColumns>
                    <R_GridLookupColumn FieldName="CUSER_REPLACEMENT" HeaderText="User Id" R_EnableAdd />
                    <R_GridTextColumn FieldName="CUSER_REPLACEMENT_NAME" HeaderText="User Name" />
                    <R_GridDatePickerColumn FieldName="DVALID_FROM" HeaderText="Valid From" R_EnableAdd />
                    <R_GridDatePickerColumn FieldName="DVALID_TO" HeaderText="Valid To" R_EnableAdd />
                    <R_GridTextColumn FieldName="CUPDATE_BY" HeaderText="Last Updated By" />
                    <R_GridDateTimePickerColumn FieldName="DUPDATE_DATE" HeaderText="Last Updated Date" />
                    <R_GridTextColumn FieldName="CCREATE_BY" HeaderText="Created By" />
                    <R_GridDateTimePickerColumn FieldName="DCREATE_DATE" HeaderText="Created Date" />
                </R_GridColumns>
            </R_Grid>
        </R_GroupBox>
    </R_ItemLayout>
</R_StackLayout>

<R_ConductorGrid @ref="@_conductorRefApprover"
                 R_ViewModel="@_GSM05000ApprovalUserViewModel"
                 R_IsHeader="true"
                 R_ServiceGetRecord="@GetRecordApprover"
                 R_Display="DisplayApprover"
                 R_AfterAdd="@AfterAddApprover"
                 R_ServiceSave="@SaveApprover"
                 R_ServiceDelete="@DeleteApprover"
                 R_AfterDelete="@AfterDeleteApprover" />

<R_ConductorGrid @ref="@_conductorRefReplacement"
                 R_ViewModel="@_GSM05000ApprovalReplacementViewModel"
                 R_ConductorParent="@_conductorRefApprover"
                 R_Display="@DisplayReplacement"
                 R_AfterAdd="@AfterAddReplacement"
                 R_Saving="@SavingReplacement"
                 R_ServiceSave="@SaveReplacement"
                 R_ServiceDelete="@DeleteReplacement" />