@page "/PMB00300"
@using PMB00300FrontResources
@using PMB00300Common.DTOs
@inherits R_Page
@inject R_ILocalizer<Resources_Dummy_Class> _localizer

<R_StackLayout Row Class="mb-1">
    <R_ItemLayout col="1">
        <R_Label> @_localizer["PROPERTY"]</R_Label>
    </R_ItemLayout>
    <R_ItemLayout col="4">
        <R_ComboBox Data="_viewModel.PropertyList"
                    Value="@_viewModel.Property.CPROPERTY_ID"
                    ValueField="@nameof(PMB00300PropertyDTO.CPROPERTY_ID)"
                    TextField="@nameof(PMB00300PropertyDTO.CPROPERTY_NAME)"
                    ValueChanged="@((string? value) => OnChangeProperty(value))"/>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout Row>
    <R_ItemLayout>
        <R_Grid @ref="_gridRef"
                DataSource="_viewModel.GridList"
                R_ConductorSource="_conductorRef"
                R_GridType="R_eGridType.Navigator"
                R_ServiceGetListRecord="GetListRecord"
                Pageable
                PageSize="23"
                Width="1100px"
                Height="540px">
            <R_GridColumns>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CBUILDING_NAME)" HeaderText="Building Name" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CFLOOR_NAME)" HeaderText="Floor" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CUNIT_NAME)" HeaderText="Unit Id" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CTENANT_NAME)" HeaderText="Tenant" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CDEPT_NAME)" HeaderText="Department" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CREF_NO)" HeaderText="LOI Ref No" TextAlignment="R_eTextAlignment.Left" Width="200px"/>
                <R_GridDatePickerColumn FieldName="@nameof(PMB00300RecalcDTO.DHO_ACTUAL_DATE)" HeaderText="HO Date" Width="200px"/>
                <R_GridNumericColumn FieldName="@nameof(PMB00300RecalcDTO.NGROSS_AREA_SIZE)" HeaderText="Gross" Width="150px"/>
                <R_GridNumericColumn FieldName="@nameof(PMB00300RecalcDTO.NNET_AREA_SIZE)" HeaderText="Net" Width="150px"/>
                <R_GridNumericColumn FieldName="@nameof(PMB00300RecalcDTO.NACTUAL_AREA_SIZE)" HeaderText="Actual" Width="150px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CUPDATE_BY)" HeaderText="Updated By" TextAlignment="R_eTextAlignment.Left" Width="150px"/>
                <R_GridDatePickerColumn FieldName="@nameof(PMB00300RecalcDTO.DUPDATE_DATE)" HeaderText="Updated Date" Width="200px"/>
                <R_GridTextColumn FieldName="@nameof(PMB00300RecalcDTO.CCREATE_BY)" HeaderText="Created By" TextAlignment="R_eTextAlignment.Left" Width="150px"/>
                <R_GridDatePickerColumn FieldName="@nameof(PMB00300RecalcDTO.DCREATE_DATE)" HeaderText="Created Date" Width="200px"/>
            </R_GridColumns>
        </R_Grid>
    </R_ItemLayout>
</R_StackLayout>

<R_StackLayout>
    <R_ItemLayout>
        <R_Popup R_Before_Open_Popup="BeforeOpenPopup" R_After_Open_Popup="AfterOpenPopup" Enabled="@(_viewModel.GridList.Count>0)">View</R_Popup>
    </R_ItemLayout>
</R_StackLayout>

<R_Conductor @ref="@_conductorRef"
             R_ViewModel="_viewModel"
             R_ServiceGetRecord="GetRecord"
             R_IsHeader/>